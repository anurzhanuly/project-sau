import{A as R,W as V,E as f,Q as y,B as b,a0 as w,c as l,q as d,G as c,h as m,F as p,a as h,g as C,o as u,a1 as D,n as E,w as x,a2 as B,b as N,t as T,e as $,u as A,s as F,_ as S}from"./index.2bf40831.js";import{s as O}from"./panel.esm.8f00012e.js";import{s as U}from"./textarea.esm.8ada2aa2.js";import{u as j}from"./adminStore.6f446072.js";import{a as M}from"./admin.d584d80b.js";const q={class:"section-recommendations-change"},z={class:"recommendation-nav"},G=["for"],I=["id","value"],J={key:0,class:"recommendation-body"},L=R({__name:"ChangeRecommendationsView",setup(Q){const i=j(),g=V(),n=f(""),t=f({});y(()=>{i.recommendations.length||i.getRecommendationsData()});const _=b(()=>i.recommendations);w(n,o=>{const a=_.value.filter(e=>e.name===o)[0].tests;t.value={};for(let e in a)t.value[e]=a[e].join(",")});const v=(o,a,e)=>{g.add({severity:o,summary:a,detail:e,life:3e3})},k=async()=>{var e;const o={};for(let s in t.value)o[s]=t.value[s].split(".,");const a=await i.saveRecommendationsData(n.value,o);if(a.status===200)v("success","\u0423\u0441\u043F\u0435\u0448\u043D\u043E","\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0432\u043D\u0435\u0441\u0435\u043D\u044B");else if(M.isAxiosError(a)){const s=(e=a.response)==null?void 0:e.data;v("error","\u041E\u0448\u0438\u0431\u043A\u0430",s.ERROR)}};return(o,a)=>(u(),l(p,null,[d(c(D)),m("section",q,[m("div",z,[(u(!0),l(p,null,h(c(_),(e,s)=>(u(),l("label",{key:s,for:`${s}`,class:E(["label",{checked:n.value===e.name}])},[x(m("input",{id:`${s}`,"onUpdate:modelValue":a[0]||(a[0]=r=>n.value=r),type:"radio",class:"hidden",value:e.name},null,8,I),[[B,n.value]]),N(" "+T(e.name),1)],10,G))),128))]),n.value!==""?(u(),l("div",J,[(u(!0),l(p,null,h(Object.keys(t.value),(e,s)=>(u(),$(c(O),{key:s,header:e,toggleable:!0,collapsed:!0},{default:A(()=>[d(c(U),{modelValue:t.value[e],"onUpdate:modelValue":r=>t.value[e]=r,style:{width:"100%",height:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["header"]))),128)),d(c(F),{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",class:"p-button-lg",onClick:k})])):C("",!0)])],64))}});const Z=S(L,[["__scopeId","data-v-3fb5478a"]]);export{Z as default};
