import{d as R,N as C,r as f,q as V,c as w,W as D,a as l,e as r,u,b as d,F as p,i as h,h as x,o as c,X as E,n as N,m as T,Y as $,L as B,t as F,g as O,w as S,s as b,_ as j}from"./index.73873074.js";import{s as A}from"./panel.esm.ae056625.js";import{s as U}from"./textarea.esm.285067c0.js";import{u as L}from"./adminStore.2dd359d4.js";import{a as M}from"./admin.d584d80b.js";const q={class:"section-recommendations-change"},z={class:"recommendation-nav"},I=["for"],J=["id","value"],W={key:0,class:"recommendation-body"},X={class:"rec-buttons"},Y=R({__name:"ChangeRecommendationsView",setup(G){const i=L(),k=C(),n=f(""),o=f({});V(()=>{i.recommendations.length||i.getRecommendationsData()});const _=w(()=>i.recommendations);D(n,s=>{const t=_.value.filter(e=>e.name===s)[0].tests;o.value={};for(let e in t)o.value[e]=t[e].join(",")});const v=(s,t,e)=>{k.add({severity:s,summary:t,detail:e,life:3e3})},g=()=>{const s=Object.keys(o.value),t=`${+s[s.length-1]+1}`;o.value[t]=""},y=async()=>{var e;const s={};for(let a in o.value)s[a]=o.value[a].split(".,");const t=await i.saveRecommendationsData(n.value,s);if(t.status===200)v("success","\u0423\u0441\u043F\u0435\u0448\u043D\u043E","\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0432\u043D\u0435\u0441\u0435\u043D\u044B");else if(M.isAxiosError(t)){const a=(e=t.response)==null?void 0:e.data;v("error","\u041E\u0448\u0438\u0431\u043A\u0430",a.ERROR)}};return(s,t)=>(c(),l(p,null,[r(u(E)),d("section",q,[d("div",z,[(c(!0),l(p,null,h(u(_),(e,a)=>(c(),l("label",{key:a,for:`${a}`,class:N(["label",{checked:n.value===e.name}])},[T(d("input",{id:`${a}`,"onUpdate:modelValue":t[0]||(t[0]=m=>n.value=m),type:"radio",class:"hidden",value:e.name},null,8,J),[[$,n.value]]),B(" "+F(e.name),1)],10,I))),128))]),n.value!==""?(c(),l("div",W,[(c(!0),l(p,null,h(Object.keys(o.value),(e,a)=>(c(),O(u(A),{key:a,header:e,toggleable:!0,collapsed:!0},{default:S(()=>[r(u(U),{modelValue:o.value[e],"onUpdate:modelValue":m=>o.value[e]=m,style:{width:"100%",height:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["header"]))),128)),d("div",X,[r(u(b),{label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",class:"p-button-raised p-button-text",onClick:g}),r(u(b),{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",class:"p-button-raised p-button-success p-button-text",onClick:y})])])):x("",!0)])],64))}});const ee=j(Y,[["__scopeId","data-v-cd8f21f6"]]);export{ee as default};
