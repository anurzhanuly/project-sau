import{y as U,f as g,_ as N,S as j,h as R,o as i,k as x,l as S,m,u as l,e as d,c,j as $,t as C,F as P,V as B,W as I,g as T,X as q,a as L,b as O,w as W,q as z,d as E}from"./index.13f7c679.js";import{a as M}from"./overlayeventbus.esm.c68c37c8.js";import{s as V}from"./button.esm.d4f6c069.js";import{u as D,s as A,a as J}from"./adminStore.d175795e.js";import{a as Q,s as X,c as G}from"./inputtext.esm.81c0f658.js";import"./ripple.esm.5d646a7b.js";import"./admin.5362adbc.js";const F=U("popup-state",()=>{const y=g(!1),b=g({});function a(){y.value=!0}function h(){y.value=!1}function o(p){const s={};return p.forEach(v=>{s[v.field]=""}),s}function f(p){b.value={...p},a()}return{isPopupVisible:y,conditionProps:b,openPopup:a,closePopup:h,createPopupFields:o,openPopupWithProps:f}});const H={class:"popup"},K={key:0},Y={key:1},Z={__name:"CreateConditionsPopupComponent",setup(y){const b=j(),a=(t,n,e)=>{b.add({severity:t,summary:n,detail:e,life:3e3})},h=D(),o=F(),f=R(()=>o.isPopupVisible),p=R(()=>h.conditionColumns),s=g(o.createPopupFields(p.value)),v=g(!1),_=()=>{if(!s.value.name.length){a("error","\u041E\u0448\u0438\u0431\u043A\u0430","\u041F\u043E\u043B\u0435 '\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u0432\u043E\u043F\u0440\u043E\u0441\u0430' \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u043E");return}if(!s.value.compare.length){a("error","\u041E\u0448\u0438\u0431\u043A\u0430","\u041F\u043E\u043B\u0435 '\u0423\u0441\u043B\u043E\u0432\u0438\u0435' \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u043E");return}if(!s.value.value.length){a("error","\u041E\u0448\u0438\u0431\u043A\u0430","\u041F\u043E\u043B\u0435 '\u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435' \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u0437\u0430\u043F\u043E\u043B\u043D\u0435\u043D\u043E");return}if(/\D/.test(s.value.testCase)||!s.value.testCase.length){a("error","\u041E\u0448\u0438\u0431\u043A\u0430","\u041D\u043E\u043C\u0435\u0440 \u0440\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0430\u0446\u0438\u0438 \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0441\u0442\u043E\u044F\u0442\u044C \u0438\u0437 \u0446\u0438\u0444\u0440");return}v.value=!0},r=()=>{if(_(),v.value){const t={...s.value},n=h.questions.filter(k=>k.name===t.name)[0];t.multiple=(n==null?void 0:n.maxSelectedChoices)>1,t.type=n.type,t.value=t.value.split(",");const{checkedRecommendationName:e,index:w}=o.conditionProps;h.createConditionInRec(t,e,w),a("success","\u0423\u0441\u043F\u0435\u0448\u043D\u043E","\u0423\u0441\u043B\u043E\u0432\u0438\u0435 \u0441\u043E\u0437\u0434\u0430\u043D\u043E"),o.closePopup()}},u=()=>{s.value=o.createPopupFields(p.value),o.closePopup()};return(t,n)=>(i(),x(l(G),{visible:l(f),"onUpdate:visible":n[2]||(n[2]=e=>B(f)?f.value=e:null),modal:"",draggable:"",closable:!1,header:"\u0421\u043E\u0437\u0434\u0430\u043D\u0438\u0435 \u043D\u043E\u0432\u043E\u0433\u043E \u0443\u0441\u043B\u043E\u0432\u0438\u044F",style:{width:"50vw"}},{footer:S(()=>[m(l(V),{label:"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0435",icon:"pi pi-times",class:"p-button-text",onClick:n[0]||(n[0]=e=>u())}),m(l(V),{label:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C",icon:"pi pi-check",class:"p-button-success",autofocus:"",onClick:n[1]||(n[1]=e=>r())})]),default:S(()=>[d("div",H,[(i(!0),c(P,null,$(l(p),(e,w)=>(i(),c("div",{key:w},[e.hasDropdown?(i(),c("div",K,[d("h3",null,C(e.header),1),m(l(Q),{modelValue:s.value[e.field],"onUpdate:modelValue":k=>s.value[e.field]=k,options:e==null?void 0:e.options,"option-value":"value","option-label":"value",placeholder:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435...",style:{width:"100%",height:"100%"},"filter-placeholder":"\u041F\u043E\u0438\u0441\u043A",filter:"",lazy:"","empty-filter-message":"\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E","empty-message":"\u041D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E"},null,8,["modelValue","onUpdate:modelValue","options"])])):(i(),c("div",Y,[d("h3",null,C(e.header),1),m(l(X),{modelValue:s.value[e.field],"onUpdate:modelValue":k=>s.value[e.field]=k,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]))]))),128))])]),_:1},8,["visible"]))}},ee=N(Z,[["__scopeId","data-v-4046c3e0"]]);const te={class:"section-recommendations-change"},oe={class:"recommendation-nav"},se=["for"],ae=["id","value"],ne={key:0,class:"recommendation-body"},le={__name:"ChangeConditionsView",setup(y){const b=I(),a=D(),h=F(),o=g(""),f=g({});T(()=>{a.recommendations.length||a.getRecommendationsData(),a.questions.length||a.getQuestionsData()});const p=R(()=>a.recommendations);q(o,v=>{f.value=p.value.filter(_=>_.name===v)[0]});const s=(v,_,r,u)=>{b.require({target:v.currentTarget,message:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B?",acceptLabel:"\u0414\u0430",rejectLabel:"\u041D\u0435\u0442",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:()=>{a.deleteRecByIndex(_,r,u)}})};return(v,_)=>(i(),c(P,null,[m(l(A)),m(l(J)),d("section",te,[d("div",oe,[(i(!0),c(P,null,$(l(p),(r,u)=>(i(),c("label",{key:u,for:u,class:O(["label",{checked:o.value===r.name}])},[W(d("input",{id:u,"onUpdate:modelValue":_[0]||(_[0]=t=>o.value=t),type:"radio",class:"hidden",value:r.name},null,8,ae),[[z,o.value]]),E(" "+C(r.name),1)],10,se))),128))]),o.value!==""?(i(),c("div",ne,[(i(!0),c(P,null,$(f.value.conditions,(r,u)=>(i(),x(l(M),{key:u,header:`${u+1}`,toggleable:!0,collapsed:!0},{default:S(()=>[m(l(V),{icon:"pi pi-plus",class:"p-button-rounded p-button-success p-button-outlined create-rec-btn",onClick:t=>l(h).openPopupWithProps({checkedRecommendationName:o.value,index:u})},null,8,["onClick"]),(i(!0),c(P,null,$(Object.keys(r),(t,n)=>(i(),c("div",{key:n,class:"condition-item"},[d("p",null,C(t),1),d("p",null,C(r[t].compare),1),d("p",null,C(r[t].value.join(",")),1),d("p",null,C(r[t].testCase),1),m(l(V),{icon:"pi pi-times",class:"p-button-rounded p-button-danger p-button-outlined",onClick:e=>s(e,o.value,u,t)},null,8,["onClick"])]))),128))]),_:2},1032,["header"]))),128)),m(l(V),{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",class:"p-button-lg"})])):L("",!0)]),m(ee)],64))}},ve=N(le,[["__scopeId","data-v-411946b8"]]);export{ve as default};
