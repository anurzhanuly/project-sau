import{A as R,W as C,E as f,Q as V,B as w,a0 as D,c as l,q as r,G as u,h as d,F as p,a as h,g as x,o as c,a1 as E,n as T,w as B,a2 as N,b as $,t as A,e as F,u as O,s as b,_ as S}from"./index.5e020d9f.js";import{s as j}from"./panel.esm.d752fede.js";import{s as U}from"./textarea.esm.e788e8a2.js";import{u as M}from"./adminStore.ddc8c150.js";import{a as q}from"./admin.d584d80b.js";const z={class:"section-recommendations-change"},G={class:"recommendation-nav"},I=["for"],J=["id","value"],L={key:0,class:"recommendation-body"},Q={class:"rec-buttons"},W=R({__name:"ChangeRecommendationsView",setup(H){const i=M(),k=C(),n=f(""),o=f({});V(()=>{i.recommendations.length||i.getRecommendationsData()});const _=w(()=>i.recommendations);D(n,s=>{const t=_.value.filter(e=>e.name===s)[0].tests;o.value={};for(let e in t)o.value[e]=t[e].join(",")});const v=(s,t,e)=>{k.add({severity:s,summary:t,detail:e,life:3e3})},g=()=>{const s=Object.keys(o.value),t=`${+s[s.length-1]+1}`;o.value[t]=""},y=async()=>{var e;const s={};for(let a in o.value)s[a]=o.value[a].split(".,");const t=await i.saveRecommendationsData(n.value,s);if(t.status===200)v("success","\u0423\u0441\u043F\u0435\u0448\u043D\u043E","\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0432\u043D\u0435\u0441\u0435\u043D\u044B");else if(q.isAxiosError(t)){const a=(e=t.response)==null?void 0:e.data;v("error","\u041E\u0448\u0438\u0431\u043A\u0430",a.ERROR)}};return(s,t)=>(c(),l(p,null,[r(u(E)),d("section",z,[d("div",G,[(c(!0),l(p,null,h(u(_),(e,a)=>(c(),l("label",{key:a,for:`${a}`,class:T(["label",{checked:n.value===e.name}])},[B(d("input",{id:`${a}`,"onUpdate:modelValue":t[0]||(t[0]=m=>n.value=m),type:"radio",class:"hidden",value:e.name},null,8,J),[[N,n.value]]),$(" "+A(e.name),1)],10,I))),128))]),n.value!==""?(c(),l("div",L,[(c(!0),l(p,null,h(Object.keys(o.value),(e,a)=>(c(),F(u(j),{key:a,header:e,toggleable:!0,collapsed:!0},{default:O(()=>[r(u(U),{modelValue:o.value[e],"onUpdate:modelValue":m=>o.value[e]=m,style:{width:"100%",height:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["header"]))),128)),d("div",Q,[r(u(b),{label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",class:"p-button-raised p-button-text",onClick:g}),r(u(b),{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",class:"p-button-raised p-button-success p-button-text",onClick:y})])])):x("",!0)])],64))}});const ee=S(W,[["__scopeId","data-v-cd8f21f6"]]);export{ee as default};
