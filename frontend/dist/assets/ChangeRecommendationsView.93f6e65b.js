import{d as R,Q as C,r as f,x as V,c as w,Y as D,a as l,e as d,f as u,b as r,F as p,j as h,i as x,o as c,$ as E,n as N,m as T,a0 as $,N as B,t as j,h as F,w as O,s as b,a1 as S,_ as A}from"./index.3b8e0aaa.js";import{s as U}from"./panel.esm.d07814d5.js";import{s as M}from"./textarea.esm.15c6d2a3.js";import{u as z}from"./adminStore.8dd65de1.js";const I={class:"section-recommendations-change"},J={class:"recommendation-nav"},L=["for"],Q=["id","value"],Y={key:0,class:"recommendation-body"},q={class:"rec-buttons"},G=R({__name:"ChangeRecommendationsView",setup(H){const i=z(),k=C(),n=f(""),o=f({});V(()=>{i.recommendations.length||i.getRecommendationsData()});const _=w(()=>i.recommendations);D(n,s=>{const t=_.value.filter(e=>e.name===s)[0].tests;o.value={};for(let e in t)o.value[e]=t[e].join(",")});const v=(s,t,e)=>{k.add({severity:s,summary:t,detail:e,life:3e3})},y=()=>{const s=Object.keys(o.value),t=`${+s[s.length-1]+1}`;o.value[t]=""},g=async()=>{var e;const s={};for(let a in o.value)s[a]=o.value[a].split(".,");const t=await i.saveRecommendationsData(n.value,s);if(t.status===200)v("success","\u0423\u0441\u043F\u0435\u0448\u043D\u043E","\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0432\u043D\u0435\u0441\u0435\u043D\u044B");else if(S.isAxiosError(t)){const a=(e=t.response)==null?void 0:e.data;v("error","\u041E\u0448\u0438\u0431\u043A\u0430",a.ERROR)}};return(s,t)=>(c(),l(p,null,[d(u(E)),r("section",I,[r("div",J,[(c(!0),l(p,null,h(u(_),(e,a)=>(c(),l("label",{key:a,for:`${a}`,class:N(["label",{checked:n.value===e.name}])},[T(r("input",{id:`${a}`,"onUpdate:modelValue":t[0]||(t[0]=m=>n.value=m),type:"radio",class:"hidden",value:e.name},null,8,Q),[[$,n.value]]),B(" "+j(e.name),1)],10,L))),128))]),n.value!==""?(c(),l("div",Y,[(c(!0),l(p,null,h(Object.keys(o.value),(e,a)=>(c(),F(u(U),{key:a,header:e,toggleable:!0,collapsed:!0},{default:O(()=>[d(u(M),{modelValue:o.value[e],"onUpdate:modelValue":m=>o.value[e]=m,style:{width:"100%",height:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["header"]))),128)),r("div",q,[d(u(b),{label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",class:"p-button-raised p-button-text",onClick:y}),d(u(b),{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",class:"p-button-raised p-button-success p-button-text",onClick:g})])])):x("",!0)])],64))}});const K=A(G,[["__scopeId","data-v-cd8f21f6"]]);export{K as default};
