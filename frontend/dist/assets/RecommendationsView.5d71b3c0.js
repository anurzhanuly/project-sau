import{d as x,a0 as w,u as B,r as p,c as T,a1 as $,a as r,e as n,f as u,b as d,F as v,z as h,x as E,g as c,a2 as N,y as j,L as F,a3 as L,j as O,J as S,P as U,I as A,h as f,n as I,_ as z}from"./index.0211c229.js";import{s as J}from"./panel.esm.1e033957.js";import{s as q}from"./confirmpopup.esm.b80c8ebe.js";import{s as M}from"./textarea.esm.cc72abfd.js";import{s as P}from"./inputnumber.esm.181eb722.js";import{u as G}from"./adminStore.c2507025.js";import"./overlayeventbus.esm.c7388726.js";const H={class:"section-recommendations-change"},Q={class:"recommendation-nav"},W=["for"],X=["id","value"],Y={key:0,class:"recommendation-body"},Z={class:"rec-buttons"},K=x({__name:"RecommendationsView",setup(ee){const _=G(),y=w(),R=B(),l=p(""),s=p({}),b=T(()=>_.allRecommendations),i=p();$(l,a=>{const t=b.value.filter(e=>e.name===a)[0].tests;s.value={};for(let e in t)s.value[e]=t[e].join(",")});const k=(a,t,e)=>{R.add({severity:a,summary:t,detail:e,life:3e3})},V=()=>{const a=Object.keys(s.value),t=`${+a[a.length-1]+1}`;s.value[t]=""},g=()=>{s.value[i.value]&&(delete s.value[i.value],i.value=null)},C=a=>{y.require({target:a.currentTarget,message:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B?",acceptLabel:"\u0414\u0430",rejectLabel:"\u041D\u0435\u0442",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:g})},D=async()=>{var e;const a={};for(let o in s.value)a[o]=s.value[o].split(".,");const t=await _.saveRecommendationsData(l.value,a);if(t.status===200)k("success","\u0423\u0441\u043F\u0435\u0448\u043D\u043E","\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0432\u043D\u0435\u0441\u0435\u043D\u044B");else if(I.isAxiosError(t)){const o=(e=t.response)==null?void 0:e.data;k("error","\u041E\u0448\u0438\u0431\u043A\u0430",o.ERROR)}};return(a,t)=>(c(),r(v,null,[n(u(N)),n(u(q)),d("section",H,[d("div",Q,[(c(!0),r(v,null,h(u(b),(e,o)=>(c(),r("label",{key:o,for:`${o}`,class:j(["label",{checked:l.value===e.name}])},[F(d("input",{id:`${o}`,"onUpdate:modelValue":t[0]||(t[0]=m=>l.value=m),type:"radio",class:"hidden",value:e.name},null,8,X),[[L,l.value]]),O(" "+S(e.name),1)],10,W))),128))]),l.value!==""?(c(),r("div",Y,[(c(!0),r(v,null,h(Object.keys(s.value),(e,o)=>(c(),U(u(J),{key:o,header:e,toggleable:!0,collapsed:!0},{default:A(()=>[n(u(M),{modelValue:s.value[e],"onUpdate:modelValue":m=>s.value[e]=m,style:{width:"100%",height:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["header"]))),128)),d("div",Z,[n(u(f),{label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",class:"p-button-raised p-button-text",onClick:V}),d("div",null,[n(u(P),{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e)},null,8,["modelValue"]),n(u(f),{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",class:"p-button-raised p-button-danger p-button-text",onClick:t[2]||(t[2]=e=>C(e))})]),n(u(f),{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",class:"p-button-raised p-button-success p-button-text",onClick:D})])])):E("",!0)])],64))}});const ce=z(K,[["__scopeId","data-v-12aaf525"]]);export{ce as default};
