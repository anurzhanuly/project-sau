import{d as x,a0 as w,u as T,r as p,c as B,a1 as E,a as i,e as n,f as u,b as r,F as v,z as h,x as $,g as c,a2 as j,y as N,L as O,a3 as F,j as I,J as L,P as S,I as U,h as f,n as A,_ as z}from"./index.01f6e14d.js";import{s as J}from"./panel.esm.63cdca2b.js";import{s as q}from"./confirmpopup.esm.99a78d5b.js";import{s as M}from"./textarea.esm.cd228700.js";import{s as P}from"./inputnumber.esm.c2df67a8.js";import{u as G}from"./adminStore.d5e494f4.js";import"./overlayeventbus.esm.b1aa63a0.js";const H={class:"section-recommendations-change"},Q={class:"recommendation-nav"},W=["for"],X=["id","value"],Y={key:0,class:"recommendation-body"},Z={class:"rec-buttons"},K=x({__name:"RecommendationsView",setup(ee){const _=G(),y=w(),R=T(),l=p(""),a=p({}),b=B(()=>_.allRecommendations),d=p(null);E(l,s=>{const t=b.value.filter(e=>e.name===s)[0].tests;a.value={};for(let e in t)a.value[e]=t[e].join(",")});const k=(s,t,e)=>{R.add({severity:s,summary:t,detail:e,life:3e3})},V=()=>{const s=Object.keys(a.value),t=`${+s[s.length-1]+1}`;a.value[t]=""},g=()=>{const s=d.value;if(s!==null&&(a.value[s]||a.value[s]==="")){const t={};Object.keys(a.value).filter(e=>+e!==s).forEach((e,o)=>{t[o+1]=a.value[+e]}),a.value=t,d.value=null}},C=s=>{y.require({target:s.currentTarget,message:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B?",acceptLabel:"\u0414\u0430",rejectLabel:"\u041D\u0435\u0442",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:g})},D=async()=>{var e;const s={};for(let o in a.value)s[o]=a.value[o].split(".,");const t=await _.saveRecommendationsData(l.value,s);if(t.status===200)k("success","\u0423\u0441\u043F\u0435\u0448\u043D\u043E","\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0432\u043D\u0435\u0441\u0435\u043D\u044B");else if(A.isAxiosError(t)){const o=(e=t.response)==null?void 0:e.data;k("error","\u041E\u0448\u0438\u0431\u043A\u0430",o.ERROR)}};return(s,t)=>(c(),i(v,null,[n(u(j)),n(u(q)),r("section",H,[r("div",Q,[(c(!0),i(v,null,h(u(b),(e,o)=>(c(),i("label",{key:o,for:`${o}`,class:N(["label",{checked:l.value===e.name}])},[O(r("input",{id:`${o}`,"onUpdate:modelValue":t[0]||(t[0]=m=>l.value=m),type:"radio",class:"hidden",value:e.name},null,8,X),[[F,l.value]]),I(" "+L(e.name),1)],10,W))),128))]),l.value!==""?(c(),i("div",Y,[(c(!0),i(v,null,h(Object.keys(a.value),(e,o)=>(c(),S(u(J),{key:o,header:e,toggleable:!0,collapsed:!0},{default:U(()=>[n(u(M),{modelValue:a.value[e],"onUpdate:modelValue":m=>a.value[e]=m,style:{width:"100%",height:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["header"]))),128)),r("div",Z,[n(u(f),{label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",class:"p-button-raised p-button-text",onClick:V}),r("div",null,[n(u(P),{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e)},null,8,["modelValue"]),n(u(f),{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",class:"p-button-raised p-button-danger p-button-text",onClick:t[2]||(t[2]=e=>C(e))})]),n(u(f),{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",class:"p-button-raised p-button-success p-button-text",onClick:D})])])):$("",!0)])],64))}});const ce=z(K,[["__scopeId","data-v-f80f605c"]]);export{ce as default};
