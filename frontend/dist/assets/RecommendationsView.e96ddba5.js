import{d as x,a0 as w,u as T,r as p,c as B,a1 as E,a as r,e as n,f as u,b as d,F as v,z as h,x as $,g as c,a2 as j,y as N,L as O,a3 as F,j as L,J as S,P as U,I as A,h as f,n as I,_ as z}from"./index.3996f050.js";import{s as J}from"./panel.esm.e9a5f198.js";import{s as q}from"./confirmpopup.esm.9cd55fda.js";import{s as M}from"./textarea.esm.000829ff.js";import{s as P}from"./inputnumber.esm.03bf1dd7.js";import{u as G}from"./adminStore.2b3bbc3e.js";import"./overlayeventbus.esm.24570deb.js";const H={class:"section-recommendations-change"},Q={class:"recommendation-nav"},W=["for"],X=["id","value"],Y={key:0,class:"recommendation-body"},Z={class:"rec-buttons"},K=x({__name:"RecommendationsView",setup(ee){const _=G(),y=w(),R=T(),l=p(""),a=p({}),b=B(()=>_.allRecommendations),i=p(null);E(l,s=>{const t=b.value.filter(e=>e.name===s)[0].tests;a.value={};for(let e in t)a.value[e]=t[e].join(",")});const k=(s,t,e)=>{R.add({severity:s,summary:t,detail:e,life:3e3})},V=()=>{const s=Object.keys(a.value),t=`${+s[s.length-1]+1}`;a.value[t]=""},g=()=>{const s={};Object.keys(a.value).filter(t=>+t!==i.value).forEach((t,e)=>{s[e+1]=a.value[+t]}),a.value=s,i.value=null},C=s=>{y.require({target:s.currentTarget,message:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B?",acceptLabel:"\u0414\u0430",rejectLabel:"\u041D\u0435\u0442",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:g})},D=async()=>{var e;const s={};for(let o in a.value)s[o]=a.value[o].split(".,");const t=await _.saveRecommendationsData(l.value,s);if(t.status===200)k("success","\u0423\u0441\u043F\u0435\u0448\u043D\u043E","\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0432\u043D\u0435\u0441\u0435\u043D\u044B");else if(I.isAxiosError(t)){const o=(e=t.response)==null?void 0:e.data;k("error","\u041E\u0448\u0438\u0431\u043A\u0430",o.ERROR)}};return(s,t)=>(c(),r(v,null,[n(u(j)),n(u(q)),d("section",H,[d("div",Q,[(c(!0),r(v,null,h(u(b),(e,o)=>(c(),r("label",{key:o,for:`${o}`,class:N(["label",{checked:l.value===e.name}])},[O(d("input",{id:`${o}`,"onUpdate:modelValue":t[0]||(t[0]=m=>l.value=m),type:"radio",class:"hidden",value:e.name},null,8,X),[[F,l.value]]),L(" "+S(e.name),1)],10,W))),128))]),l.value!==""?(c(),r("div",Y,[(c(!0),r(v,null,h(Object.keys(a.value),(e,o)=>(c(),U(u(J),{key:o,header:e,toggleable:!0,collapsed:!0},{default:A(()=>[n(u(M),{modelValue:a.value[e],"onUpdate:modelValue":m=>a.value[e]=m,style:{width:"100%",height:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["header"]))),128)),d("div",Z,[n(u(f),{label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",class:"p-button-raised p-button-text",onClick:V}),d("div",null,[n(u(P),{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e)},null,8,["modelValue"]),n(u(f),{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",class:"p-button-raised p-button-danger p-button-text",disabled:!i.value,onClick:t[2]||(t[2]=e=>C(e))},null,8,["disabled"])]),n(u(f),{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",class:"p-button-raised p-button-success p-button-text",onClick:D})])])):$("",!0)])],64))}});const ce=z(K,[["__scopeId","data-v-756148b6"]]);export{ce as default};
