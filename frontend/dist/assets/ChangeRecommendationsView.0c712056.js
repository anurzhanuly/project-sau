import{E as y,W as R,H as v,Q as V,G as w,a0 as C,c as l,b as d,I as c,k as m,F as p,h,d as D,o as u,a1 as b,n as E,w as x,a2 as N,i as T,f as B,e as $,y as F,a as S,_ as A}from"./index.d3a66eec.js";import{s as O}from"./panel.esm.b9b1b42e.js";import{s as U}from"./textarea.esm.c305eac4.js";import{u as j}from"./adminStore.26d137e7.js";import{a as I}from"./admin.d584d80b.js";const M={class:"section-recommendations-change"},z={class:"recommendation-nav"},G=["for"],H=["id","value"],J={key:0,class:"recommendation-body"},L=y({__name:"ChangeRecommendationsView",setup(Q){const i=j(),g=R(),n=v(""),t=v({});V(()=>{i.recommendations.length||i.getRecommendationsData()});const _=w(()=>i.recommendations);C(n,o=>{const a=_.value.filter(e=>e.name===o)[0].tests;t.value={};for(let e in a)t.value[e]=a[e].join(",")});const f=(o,a,e)=>{g.add({severity:o,summary:a,detail:e,life:3e3})},k=async()=>{var e;const o={};for(let s in t.value)o[s]=t.value[s].split(".,");const a=await i.saveRecommendationsData(n.value,o);if(a.status===200)f("success","\u0423\u0441\u043F\u0435\u0448\u043D\u043E","\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0432\u043D\u0435\u0441\u0435\u043D\u044B");else if(I.isAxiosError(a)){const s=(e=a.response)==null?void 0:e.data;f("error","\u041E\u0448\u0438\u0431\u043A\u0430",s.ERROR)}};return(o,a)=>(u(),l(p,null,[d(c(b)),m("section",M,[m("div",z,[(u(!0),l(p,null,h(c(_),(e,s)=>(u(),l("label",{key:s,for:`${s}`,class:E(["label",{checked:n.value===e.name}])},[x(m("input",{id:`${s}`,"onUpdate:modelValue":a[0]||(a[0]=r=>n.value=r),type:"radio",class:"hidden",value:e.name},null,8,H),[[N,n.value]]),T(" "+B(e.name),1)],10,G))),128))]),n.value!==""?(u(),l("div",J,[(u(!0),l(p,null,h(Object.keys(t.value),(e,s)=>(u(),$(c(O),{key:s,header:e,toggleable:!0,collapsed:!0},{default:F(()=>[d(c(U),{modelValue:t.value[e],"onUpdate:modelValue":r=>t.value[e]=r,style:{width:"100%",height:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["header"]))),128)),d(c(S),{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",class:"p-button-lg",onClick:k})])):D("",!0)])],64))}});const Z=A(L,[["__scopeId","data-v-ff03ee83"]]);export{Z as default};
