import{d as x,a1 as w,u as T,r as p,c as B,a2 as E,a as r,e as n,f as u,b as d,F as v,A as h,y as $,g as c,a3 as j,z as N,M as O,a4 as A,j as F,K as S,Q as U,J as L,h as f,n as z,_ as I}from"./index.c024adfb.js";import{s as J}from"./panel.esm.9120e7d9.js";import{s as M}from"./confirmpopup.esm.54ec7c5d.js";import{s as q}from"./textarea.esm.d2e41567.js";import{s as Q}from"./inputnumber.esm.2ac4e003.js";import{u as G}from"./adminStore.70f52fc3.js";import"./overlayeventbus.esm.96b68778.js";const H={class:"section-recommendations-change"},K={class:"recommendation-nav"},P=["for"],W=["id","value"],X={key:0,class:"recommendation-body"},Y={class:"rec-buttons"},Z=x({__name:"RecommendationsView",setup(ee){const _=G(),y=w(),R=T(),l=p(""),a=p({}),b=B(()=>_.allRecommendations),i=p(null);E(l,s=>{const t=b.value.filter(e=>e.name===s)[0].tests;a.value={};for(let e in t)a.value[e]=t[e].join(",")});const k=(s,t,e)=>{R.add({severity:s,summary:t,detail:e,life:3e3})},V=()=>{const s=Object.keys(a.value),t=`${+s[s.length-1]+1}`;a.value[t]=""},g=()=>{const s={};Object.keys(a.value).filter(t=>+t!==i.value).forEach((t,e)=>{s[e+1]=a.value[+t]}),a.value=s,i.value=null},C=s=>{y.require({target:s.currentTarget,message:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B?",acceptLabel:"\u0414\u0430",rejectLabel:"\u041D\u0435\u0442",icon:"pi pi-info-circle",acceptClass:"p-button-danger",accept:g})},D=async()=>{var e;const s={};for(let o in a.value)s[o]=a.value[o].split(".,");const t=await _.saveRecommendationsData(l.value,s);if(t.status===200)k("success","\u0423\u0441\u043F\u0435\u0448\u043D\u043E","\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F \u0432\u043D\u0435\u0441\u0435\u043D\u044B");else if(z.isAxiosError(t)){const o=(e=t.response)==null?void 0:e.data;k("error","\u041E\u0448\u0438\u0431\u043A\u0430",o.ERROR)}};return(s,t)=>(c(),r(v,null,[n(u(j)),n(u(M)),d("section",H,[d("div",K,[(c(!0),r(v,null,h(u(b),(e,o)=>(c(),r("label",{key:o,for:`${o}`,class:N(["label",{checked:l.value===e.name}])},[O(d("input",{id:`${o}`,"onUpdate:modelValue":t[0]||(t[0]=m=>l.value=m),type:"radio",class:"hidden",value:e.name},null,8,W),[[A,l.value]]),F(" "+S(e.name),1)],10,P))),128))]),l.value!==""?(c(),r("div",X,[(c(!0),r(v,null,h(Object.keys(a.value),(e,o)=>(c(),U(u(J),{key:o,header:e,toggleable:!0,collapsed:!0},{default:L(()=>[n(u(q),{modelValue:a.value[e],"onUpdate:modelValue":m=>a.value[e]=m,style:{width:"100%",height:"100%"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["header"]))),128)),d("div",Y,[n(u(f),{label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",class:"p-button-raised p-button-text",onClick:V}),d("div",null,[n(u(Q),{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e)},null,8,["modelValue"]),n(u(f),{label:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",class:"p-button-raised p-button-danger p-button-text",disabled:!i.value,onClick:t[2]||(t[2]=e=>C(e))},null,8,["disabled"])]),n(u(f),{label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",class:"p-button-raised p-button-success p-button-text",onClick:D})])])):$("",!0)])],64))}});const ce=I(Z,[["__scopeId","data-v-756148b6"]]);export{ce as default};
